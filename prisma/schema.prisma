generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model ShortenedUrl {
  id          String    @id
  originalUrl String
  createdAt   DateTime  @default(now())
  expiresAt   DateTime?

  visits Visit[]

  @@map("shortened_urls")
}

model Visit {
  id             String   @id @default(uuid())
  shortenedUrlId String
  visitedAt      DateTime @default(now())
  referrer       String?

  shortenedUrl ShortenedUrl @relation(fields: [shortenedUrlId], references: [id])

  @@index([shortenedUrlId, visitedAt])
  @@map("visits")
}
